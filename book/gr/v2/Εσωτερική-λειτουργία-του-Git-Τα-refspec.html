---
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: gr
  chapter:
    title: Εσωτερική λειτουργία του Git
    number: 10
  section:
    title: Τα refspec
    number: 5
    cs_number: '10.5'
    previous: book/gr/v2/Εσωτερική-λειτουργία-του-Git-Πακετάρισμα-αρχείων
    next: book/gr/v2/Εσωτερική-λειτουργία-του-Git-Πρωτόκολλα-μεταφοράς
title: Git - Τα refspec

---
<h2 id="r_refspec">Τα refspec</h2>
<div class="paragraph">
<p>Σε αυτό το βιβλίο, χρησιμοποιήσαμε απλές απεικονίσεις από απομακρυσμένους κλάδους σε τοπικές αναφορές, αλλά οι απεικονίσεις είναι δυνατό να είναι πιο σύνθετες.
Ας υποθέσουμε ότι προσθέτουμε ένα απομακρυσμένο σύστημα όπως αυτό:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git remote add origin https://github.com/schacon/simplegit-progit</code></pre>
</div>
</div>
<div class="paragraph">
<p>Η παραπάνω προσθέτει μια ενότητα στο αρχείο <code>.git/config</code>, καθορίζοντας το όνομα του απομακρυσμένου αποθετηρίου (<code>origin</code>), τη διεύθυνση URL του και το refspec για την ανάκτηση:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ini" data-lang="ini">[remote "origin"]
	url = https://github.com/schacon/simplegit-progit
	fetch = +refs/heads/*:refs/remotes/origin/*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Η μορφή του refspec είναι ένα προαιρετικό <code>+</code>, ακολουθούμενο από <code>&lt;src&gt;:&lt;dst&gt;</code>, όπου <code>&lt;src&gt;</code> είναι το πρότυπο για αναφορές στην απομακρυσμένη πλευρά και <code>&lt;dst&gt;</code> είναι πού θα γραφούν οι αναφορές αυτές τοπικά.
Το <code>+</code> λέει στο Git να ενημερώσει την αναφορά ακόμα κι αν δεν πρόκειται για ταχυπροώθηση.</p>
</div>
<div class="paragraph">
<p>Στην προεπιλεγμένη περίπτωση που γράφεται αυτόματα από μια εντολή <code>git remote add</code>, το Git συγκεντρώνει όλες τις αναφορές κάτω από τον <code>refs/heads/</code> του διακομιστή και τις γράφει στον <code>refs/remotes/origin/</code> τοπικά.
Επομένως, εάν υπάρχει ένας κλάδος <code>master</code> στον διακομιστή, μπορούμε να έχουμε πρόσβαση στο μητρώο αυτού του κλάδου τοπικά μέσω</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git log origin/master
$ git log remotes/origin/master
$ git log refs/remotes/origin/master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Όλες είναι ισοδύναμες, διότι το Git επεκτείνει το καθένα σε <code>refs/remotes/origin/master</code>.</p>
</div>
<div class="paragraph">
<p>Εάν θέλουμε το Git αντί να έλκει μόνο τον κλάδο <code>master</code> κάθε φορά και όχι κάθε άλλο κλάδο από τον απομακρυσμένο διακομιστή, μπορούμε να αλλάξουμε τη γραμμή παραλαβής σε</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>fetch = +refs/heads/master:refs/remotes/origin/master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Αυτό είναι μόνο το προεπιλεγμένο refspec για την <code>git fetch</code> για αυτό το απομακρυσμένο αποθετήριο.
Αν θέλουμε να κάνουμε κάτι μία φορά, μπορούμε να καθορίσουμε το refspec στη γραμμή εντολών.
Για να έλξουμε τον κλάδο <code>master</code> του απομακρυσμένου αποθετηρίου στον τοπικό <code>origin/mymaster</code>, μπορούμε να τρέξουμε</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git fetch origin master:refs/remotes/origin/mymaster</code></pre>
</div>
</div>
<div class="paragraph">
<p>Μπορούμε επίσης να ορίσουμε πολλά refspecs.
Στη γραμμή εντολών, μπορούμε να έλξουμε αρκετούς κλάδους ως εξής:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git fetch origin master:refs/remotes/origin/mymaster \
	 topic:refs/remotes/origin/topic
From git@github.com:schacon/simplegit
 ! [rejected]        master     -&gt; origin/mymaster  (non fast forward)
 * [new branch]      topic      -&gt; origin/topic</code></pre>
</div>
</div>
<div class="paragraph">
<p>Σε αυτήν την περίπτωση, η έλξη του κλάδου <code>master</code> απορρίφθηκε επειδή δεν ήταν αναφορά ταχυπροώθησης. Μπορούμε να παρακάμψουμε αυτήν τη συμπεριφορά βάζοντας το <code>+</code> μπροστά από το refspec.</p>
</div>
<div class="paragraph">
<p>Μπορούμε επίσης να ορίσουμε πολλά refspec για ανάκτηση στο αρχείο ρυθμίσεων.
Αν θέλουμε πάντα να ανακτούμε τους κύριους και πειραματικούς κλάδους προσθέτουμε αυτές τις δύο γραμμές:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ini" data-lang="ini">[remote "origin"]
	url = https://github.com/schacon/simplegit-progit
	fetch = +refs/heads/master:refs/remotes/origin/master
	fetch = +refs/heads/experiment:refs/remotes/origin/experiment</code></pre>
</div>
</div>
<div class="paragraph">
<p>Δεν μπορούμε να χρησιμοποιήσουμε χαρακτήρες μπαλαντές στο μοτίβο, επομένως το παρακάτω δεν είναι έγκυρη έκφραση:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>fetch = +refs/heads/qa*:refs/remotes/origin/qa*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Πάντως, μπορούμε να χρησιμοποιήσουμε ονοματοχώρους (ή καταλόγους) για να πετύχουμε κάτι τέτοιο.
Εάν έχουμε μια ομάδα QA που ωθεί μια σειρά από κλάδους και θέλουμε να πάρουμε το κύριο κλάδο και οποιοδήποτε από τους κλάδους της ομάδας QA αλλά τίποτα άλλο, μπορούμε να χρησιμοποιήσουμε μια ενότητα config όπως αυτή:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ini" data-lang="ini">[remote "origin"]
	url = https://github.com/schacon/simplegit-progit
	fetch = +refs/heads/master:refs/remotes/origin/master
	fetch = +refs/heads/qa/*:refs/remotes/origin/qa/*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Εάν έχουμε μια πολύπλοκη ροή εργασίας  που διαθέτει μια ομάδα QA που ωθεί κλάδους, προγραμματιστές που ωθούν κλάδους και ομάδες ενσωμάτωσης που ωθούν και συνεργάζονται σε απομακρυσμένα κλάδους, μπορούμε να τους χωρίσουμε σε ονοματοχώρους με αυτό τον τρόπο.</p>
</div>
<div class="sect3">
<h3 id="r_pushing_refspecs">Ώθηση refspecs</h3>
<div class="paragraph">
<p>Είναι ωραίο ότι μπορούμε να ανακτήσουμε αναφορές εντός ονοματοχώρων με αυτόν τον τρόπο, αλλά πώς μπόρεσε η ομάδα QA να βάλει όλους τους κλάδους της σε έναν ονοματοχώρο <code>qa/</code>;
Αυτό το πετυχαίνουμε χρησιμοποιώντας refspec για να ωθήσουμε.</p>
</div>
<div class="paragraph">
<p>Εάν η ομάδα QA θέλει να ωθήσει τον κλάδο <code>master</code> στον <code>qa/master</code> στον απομακρυσμένο διακομιστή, μπορεί να τρέξει</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git push origin master:refs/heads/qa/master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Αν θέλουν να το κάνει το Git αυτόματα κάθε φορά που τρέχουν την <code>git push origin</code>, μπορούν να προσθέσουν μια τιμή <code>push</code> στο αρχείο config:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ini" data-lang="ini">[remote "origin"]
	url = https://github.com/schacon/simplegit-progit
	fetch = +refs/heads/*:refs/remotes/origin/*
	push = refs/heads/master:refs/heads/qa/master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Και πάλι, αυτό θα προκαλέσει μια <code>git push origin</code> να ωθήσει τον τοπικό κλάδο <code>master</code> στον απομακρυσμένο κλάδο <code>qa/master</code> εκ προεπιλογής.</p>
</div>
</div>
<div class="sect3">
<h3 id="_διαγραφή_αναφορών">Διαγραφή αναφορών</h3>
<div class="paragraph">
<p>Μπορούμε επίσης να χρησιμοποιήσουμε το refspec για να διαγράψουμε αναφορές από τον απομακρυσμένο διακομιστή εκτελώντας κάτι σαν αυτό:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git push origin :topic</code></pre>
</div>
</div>
<div class="paragraph">
<p>Επειδή το refspec είναι <code>&lt;src&gt;:&lt;dst&gt;</code>, αν αφήσουμε το τμήμα <code>&lt;src&gt;</code>, αυτό ουσιαστικά λέει “κάνε τον θεματικό κλάδο στο απομακρυσμένο αποθετήριο, τίποτα”, οπότε το διαγράφει.</p>
</div>
</div>
<div id="nav"><a href="{{ page.book.section.previous | relative_url }}">prev</a> | <a href="{{ page.book.section.next | relative_url }}">next</a></div>