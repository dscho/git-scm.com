---
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: gr
  chapter:
    title: Το Git στον διακομιστή
    number: 4
  section:
    title: Εγκατάσταση του Git σε διακομιστή
    number: 2
    cs_number: '4.2'
    previous: book/gr/v2/Το-Git-στον-διακομιστή-Τα-πρωτόκολλα
    next: book/gr/v2/Το-Git-στον-διακομιστή-Δημιουργία-δημόσιου-κλειδιού-SSH
title: Git - Εγκατάσταση του Git σε διακομιστή

---
<h2 id="r_git_on_the_server">Εγκατάσταση του Git σε διακομιστή</h2>
<div class="paragraph">
<p>Τώρα θα δούμε τη δημιουργία μιας υπηρεσίας Git που θα εκτελεί αυτά τα πρωτόκολλα στον δικό μας διακομιστή.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Εδώ θα επιδείξουμε τις εντολές και τα βήματα που απαιτούνται για να κάνουμε βασικές απλοποιημένες εγκαταστάσεις σε έναν διακομιστή σε Linux, αν και είναι επίσης δυνατή η εκτέλεση αυτών των υπηρεσιών σε διακομιστές Mac ή Windows.
Η εγκατάσταση ενός διακομιστή παραγωγής στην υποδομή μας προϋποθέτει ασφαλώς διαφορές στα μέτρα ασφαλείας ή τα εργαλεία των λειτουργικών συστημάτων, αλλά αυτό θα μας δώσει τη γενική ιδέα για το τι εμπλέκεται.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Για να ρυθμίσουμε αρχικά οποιοδήποτε διακομιστή Git, πρέπει να εξάγουμε ένα υπάρχον αποθετήριο σε ένα νέο γυμνό αποθετήριο —ένα αποθετήριο που δεν περιέχει κατάλογο εργασίας.
Αυτό είναι γενικά εύκολο να γίνει.
Για να κλωνοποιήσουμε το αποθετήριό μας και να δημιουργήσουμε ένα νέο γυμνό αποθετήριο, εκτελούμε την εντολή <code>clone</code> με την επιλογή <code>--bare</code>. 
Συμβατικά, οι γυμνοί κατάλογοι αποθετηρίων τελειώνουν σε <code>.git</code>, ως εξής:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone --bare my_project my_project.git
Cloning into bare repository 'my_project.git'...
done.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Θα πρέπει τώρα να έχουμε ένα αντίγραφο των δεδομένων του καταλόγου Git στον κατάλογο <code>my_project.git</code>.</p>
</div>
<div class="paragraph">
<p>Αυτό είναι σχεδόν ισοδύναμο με κάτι σαν αυτό:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cp -Rf my_project/.git my_project.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Υπάρχουν μερικές μικροδιαφορές στο αρχείο ρυθμίσεων· αλλά για τον σκοπό μας αυτό δεν είναι σημαντικό.
Η παραπάνω εντολή παίρνει το αποθετήριο Git μόνο του, χωρίς κατάλογο εργασίας και δημιουργεί έναν κατάλογο αποκλειστικά για αυτό.</p>
</div>
<div class="sect3">
<h3 id="r_bare_repo">Τοποθέτηση του γυμνού αποθετηρίου σε έναν διακομιστή</h3>
<div class="paragraph">
<p>Τώρα που έχουμε ένα γυμνό αντίγραφο του αποθετηρίου μας, το μόνο που χρειάζεται να κάνουμε είναι να το βάλουμε σε έναν διακομιστή και να ρυθμίσουμε τα πρωτόκολλά μας.
Ας υποθέσουμε ότι έχουμε δημιουργήσει έναν διακομιστή που ονομάζεται <code>git.example.com</code> στον οποίο έχουμε πρόσβαση μέσω SSH και θέλουμε να αποθηκεύσουμε όλα τα αποθετήρια Git στον κατάλογο <code>/opt/git</code>.
Υποθέτοντας ότι το <code>/opt/git</code> υπάρχει σε αυτόν τον διακομιστή, μπορούμε να ρυθμίσουμε το νέο αποθετήριό μας αντιγράφοντας το γυμνό αποθετήριο:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ scp -r my_project.git user@git.example.com:/srv/git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Σε αυτό το σημείο, άλλοι χρήστες που έχουν πρόσβαση SSH στον ίδιο διακομιστή ο οποίος έχει πρόσβαση ανάγνωσης στον κατάλογο <code>/opt/git</code> μπορούν να κλωνοποιήσουν τον αποθετήριό μας τρέχοντας</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone user@git.example.com:/srv/git/my_project.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Αν ένας χρήστης συνδεθεί με SSH σε έναΝ διακομιστή και έχει δικαίωμα εγγραφής στον κατάλογο <code>/opt/git/my_project.git</code>, θα έχει αυτόματα δικαίωμα ώθησης.</p>
</div>
<div class="paragraph">
<p>Το Git θα προσθέσει αυτόματα δικαιώματα εγγραφής σε ομάδες σε ένα αποθετήριο σωστά εάν εκτελέσουμε την εντολή <code>git init</code> με την επιλογή <code>--shared</code>. </p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ ssh user@git.example.com
$ cd /opt/git/my_project.git
$ git init --bare --shared</code></pre>
</div>
</div>
<div class="paragraph">
<p>Βλέπουμε πόσο εύκολο είναι να πάρουμε ένα αποθετήριο Git, να δημιουργήσουμε μια γυμνή έκδοσή του και να την τοποθετήσουμε σε έναν διακομιστή στον οποίο εμείς και οι συνεργάτες μας έχουμε πρόσβαση μέσω SSH.
Τώρα είμαστε έτοιμοι να συνεργαστούμε στο ίδιο έργο.</p>
</div>
<div class="paragraph">
<p>Είναι σημαντικό να σημειωθεί ότι αυτό είναι κυριολεκτικά το μόνο που χρειάζεται να κάνουμε για να τρέξουμε έναν χρήσιμο διακομιστή Git στον οποίο έχουν πρόσβαση πολλοί χρήστες —απλά προσθέτουμε λογαριασμούς SSH σε έναν διακομιστή και ρίχνουμε ένα γυμνό αποθετήριο κάπου όπου όλοι αυτοί οι χρήστες έχουν πρόσβαση ανάγνωσης/εγγραφής.
Είμαστε έτοιμοι —δεν χρειάζεται τίποτα άλλο.</p>
</div>
<div class="paragraph">
<p>Στις επόμενες ενότητες θα δούμε πώς μπορούμε να επεκταθούμε σε πιο εξεζητημένες ρυθμίσεις.
Αυτή η συζήτηση θα περιλαμβάνει τη μη δημιουργία λογαριασμών χρηστών για κάθε χρήστη, την προσθήκη δημόσιας πρόσβασης ανάγνωσης σε αποθετήρια, την εγκατάσταση διαδικτυακών UI και πολλά άλλα.
Ωστόσο, ας έχουμε υπόψη ότι για να συνεργαστούμε με άλλους σε ένα ιδιωτικό έργο, το μόνο που <em>χρειαζόμαστε</em> είναι ένας διακομιστής SSH και ένα γυμνό αποθετήριο.</p>
</div>
</div>
<div class="sect3">
<h3 id="_μικρές_εγκαταστάσεις">Μικρές εγκαταστάσεις</h3>
<div class="paragraph">
<p>Εάν είμαστε μια μικρή επιχείρηση ή απλώς δοκιμάζουμε το Git στον οργανισμό μας και έχουμε μόνο λίγους προγραμματιστές, τα πράγματα είναι απλά.
Μια από τις πιο περίπλοκες πτυχές της εγκατάστασης ενός διακομιστή Git είναι η διαχείριση των χρηστών.
Εάν θέλουμε μερικά αποθετήρια να είναι πρόσβασιμα από ορισμένους χρήστες μόνο-για-ανάγνωση  και για ανάγνωση/εγγραφή από άλλους, η πρόσβαση και τα δικαιώματα μπορεί να είναι λίγο πιο δύσκολο να ρυθμιστούν.</p>
</div>
<div class="sect4">
<h4 id="_πρόσβαση_μέσω_ssh">Πρόσβαση μέσω SSH</h4>
<div class="paragraph">
<p>
Εάν έχουμε έναν διακομιστή στον οποίο όλοι οι προγραμματιστές μας έχουν ήδη πρόσβαση SSH, είναι γενικά ευκολότερο να δημιουργήσουμε το πρώτο αποθετήριό μας σε αυτόν, επειδή δεν χρειάζεται να κάνουμε σχεδόν καθόλου δουλειά (όπως συζητήθηκε στην προηγούμενη ενότητα).
Αν θέλουμε πιο πολύπλοκα είδη δικαιωμάτων ελέγχου πρόσβασης στα αποθετήριά μας, μπορούμε να τα χειριστούμε με τα δικαιώματα συστήματος αρχείων του λειτουργικού συστήματος που τρέχει ο διακομιστής μας.</p>
</div>
<div class="paragraph">
<p>Εάν θέλουμε να τοποθετήσουμε τα αποθετήριά μας σε έναν διακομιστή που δεν διαθέτει λογαριασμούς για όλα τα μέλη της ομάδας μας για τα οποία θέλουμε να έχουν δικαίωμα εγγραφής, τότε πρέπει να τους δώσουμε πρόσβαση SSH.
Αν έχουμε έναν διακομιστή με τον οποίο μπορούμε να τα κάνουμε αυτά, τότε έχουμε ήδη εγκατεστημένο έναν διακομιστή SSH και έτσι έχουμε πρόσβαση στον διακομιστή.</p>
</div>
<div class="paragraph">
<p>Υπάρχουν μερικοί τρόποι με τους οποίους μπορούμε να δώσουμε πρόσβαση σε όλους στην ομάδα μας.
Ο πρώτος είναι να δημιουργήσουμε λογαριασμούς για όλους, κάτι που είναι απλό, αλλά μπορεί να είναι κουραστικό.
Μπορεί να μην θέλουμε να τρέξουμε το <code>adduser</code> και να ορίσουμε προσωρινούς κωδικούς πρόσβασης για κάθε χρήστη.</p>
</div>
<div class="paragraph">
<p>Μια δεύτερη μέθοδος είναι να δημιουργήσουμε έναν μοναδικό χρήστη <em>git</em> στο μηχάνημα, να ζητήσουμε από κάθε χρήστη που θα έχει πρόσβαση εγγραφής να μας στείλει ένα δημόσιο κλειδί SSH και να προσθέσουμε αυτό το κλειδί στο αρχείο <code>~/.ssh/authorized_keys</code> του νέου χρήστη <em>git</em>.
Σε αυτό το σημείο, όλοι θα μπορούν να έχουν πρόσβαση σε αυτό το μηχάνημα μέσω του χρήστη <em>git</em>.
Αυτό δεν επηρεάζει τα δεδομένα των υποβολών με κανέναν τρόπο —ο χρήστης SSH που συνδέεται δεν επηρεάζει τις υποβολές που έχουμε καταγράψει.</p>
</div>
<div class="paragraph">
<p>Ένας άλλος τρόπος είναι να στήσουμε τον διακομιστή SSH ώστρε να ταυτοποιεί μέσω ενός διακομιστή LDAP ή κάποια άλλη κεντρική πηγή ταυτοποίησης που ενδεχομένως έχουμε ήδη ρυθμίσει.
Εφόσον ο κάθε χρήστης μπορεί να αποκτήσει πρόσβαση στο κέλυφος, οποιοσδήποτε μηχανισμός ταυτοποίησης SSH που μπορούμε να σκεφτούμε θα πρέπει να λειτουργεί.</p>
</div>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>