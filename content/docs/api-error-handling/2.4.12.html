---
category: manual
section: documentation
subsection: manual
title: Git - api-error-handling Documentation
docname: api-error-handling
version: 2.4.12
aliases:
- "/docs/api-error-handling/2.4.12"
- "/docs/api-error-handling/2.4.12.html"
- "/docs/api-error-handling/2.5.6"
- "/docs/api-error-handling/2.5.6.html"
- "/docs/api-error-handling/2.6.7"
- "/docs/api-error-handling/2.6.7.html"
- "/docs/api-error-handling/2.7.6"
- "/docs/api-error-handling/2.7.6.html"
- "/docs/api-error-handling/2.8.6"
- "/docs/api-error-handling/2.8.6.html"
- "/docs/api-error-handling/2.9.5"
- "/docs/api-error-handling/2.9.5.html"
- "/docs/api-error-handling/2.10.5"
- "/docs/api-error-handling/2.10.5.html"
- "/docs/api-error-handling/2.11.4"
- "/docs/api-error-handling/2.11.4.html"
- "/docs/api-error-handling/2.12.5"
- "/docs/api-error-handling/2.12.5.html"
- "/docs/api-error-handling/2.13.7"
- "/docs/api-error-handling/2.13.7.html"
- "/docs/api-error-handling/2.14.6"
- "/docs/api-error-handling/2.14.6.html"
- "/docs/api-error-handling/2.15.4"
- "/docs/api-error-handling/2.15.4.html"
- "/docs/api-error-handling/2.16.6"
- "/docs/api-error-handling/2.16.6.html"
- "/docs/api-error-handling/2.17.0"
- "/docs/api-error-handling/2.17.0.html"
- "/docs/api-error-handling/2.17.1"
- "/docs/api-error-handling/2.17.1.html"
- "/docs/api-error-handling/2.17.2"
- "/docs/api-error-handling/2.17.2.html"
- "/docs/api-error-handling/2.17.3"
- "/docs/api-error-handling/2.17.3.html"
- "/docs/api-error-handling/2.17.4"
- "/docs/api-error-handling/2.17.4.html"
- "/docs/api-error-handling/2.17.5"
- "/docs/api-error-handling/2.17.5.html"
- "/docs/api-error-handling/2.17.6"
- "/docs/api-error-handling/2.17.6.html"
- "/docs/api-error-handling/2.18.0"
- "/docs/api-error-handling/2.18.0.html"
- "/docs/api-error-handling/2.18.1"
- "/docs/api-error-handling/2.18.1.html"
- "/docs/api-error-handling/2.18.2"
- "/docs/api-error-handling/2.18.2.html"
- "/docs/api-error-handling/2.18.3"
- "/docs/api-error-handling/2.18.3.html"
- "/docs/api-error-handling/2.18.4"
- "/docs/api-error-handling/2.18.4.html"
- "/docs/api-error-handling/2.18.5"
- "/docs/api-error-handling/2.18.5.html"
- "/docs/api-error-handling/2.19.0"
- "/docs/api-error-handling/2.19.0.html"
- "/docs/api-error-handling/2.19.1"
- "/docs/api-error-handling/2.19.1.html"
- "/docs/api-error-handling/2.19.2"
- "/docs/api-error-handling/2.19.2.html"
- "/docs/api-error-handling/2.19.3"
- "/docs/api-error-handling/2.19.3.html"
- "/docs/api-error-handling/2.19.4"
- "/docs/api-error-handling/2.19.4.html"
- "/docs/api-error-handling/2.19.5"
- "/docs/api-error-handling/2.19.5.html"
- "/docs/api-error-handling/2.19.6"
- "/docs/api-error-handling/2.19.6.html"
- "/docs/api-error-handling/2.20.0"
- "/docs/api-error-handling/2.20.0.html"
- "/docs/api-error-handling/2.20.1"
- "/docs/api-error-handling/2.20.1.html"
- "/docs/api-error-handling/2.20.2"
- "/docs/api-error-handling/2.20.2.html"
- "/docs/api-error-handling/2.20.3"
- "/docs/api-error-handling/2.20.3.html"
- "/docs/api-error-handling/2.20.4"
- "/docs/api-error-handling/2.20.4.html"
- "/docs/api-error-handling/2.20.5"
- "/docs/api-error-handling/2.20.5.html"
- "/docs/api-error-handling/2.21.0"
- "/docs/api-error-handling/2.21.0.html"
- "/docs/api-error-handling/2.21.1"
- "/docs/api-error-handling/2.21.1.html"
- "/docs/api-error-handling/2.21.2"
- "/docs/api-error-handling/2.21.2.html"
- "/docs/api-error-handling/2.21.3"
- "/docs/api-error-handling/2.21.3.html"
- "/docs/api-error-handling/2.21.4"
- "/docs/api-error-handling/2.21.4.html"
- "/docs/api-error-handling/2.22.0"
- "/docs/api-error-handling/2.22.0.html"
- "/docs/api-error-handling/2.22.1"
- "/docs/api-error-handling/2.22.1.html"
- "/docs/api-error-handling/2.22.2"
- "/docs/api-error-handling/2.22.2.html"
- "/docs/api-error-handling/2.22.3"
- "/docs/api-error-handling/2.22.3.html"
- "/docs/api-error-handling/2.22.4"
- "/docs/api-error-handling/2.22.4.html"
- "/docs/api-error-handling/2.22.5"
- "/docs/api-error-handling/2.22.5.html"
- "/docs/api-error-handling/2.23.0"
- "/docs/api-error-handling/2.23.0.html"
- "/docs/api-error-handling/2.23.1"
- "/docs/api-error-handling/2.23.1.html"
- "/docs/api-error-handling/2.23.2"
- "/docs/api-error-handling/2.23.2.html"
- "/docs/api-error-handling/2.23.3"
- "/docs/api-error-handling/2.23.3.html"
- "/docs/api-error-handling/2.23.4"
- "/docs/api-error-handling/2.23.4.html"
- "/docs/api-error-handling/2.24.0"
- "/docs/api-error-handling/2.24.0.html"
- "/docs/api-error-handling/2.24.1"
- "/docs/api-error-handling/2.24.1.html"
- "/docs/api-error-handling/2.24.2"
- "/docs/api-error-handling/2.24.2.html"
- "/docs/api-error-handling/2.24.3"
- "/docs/api-error-handling/2.24.3.html"
- "/docs/api-error-handling/2.24.4"
- "/docs/api-error-handling/2.24.4.html"
- "/docs/api-error-handling/2.25.0"
- "/docs/api-error-handling/2.25.0.html"
- "/docs/api-error-handling/2.25.1"
- "/docs/api-error-handling/2.25.1.html"
- "/docs/api-error-handling/2.25.2"
- "/docs/api-error-handling/2.25.2.html"
- "/docs/api-error-handling/2.25.3"
- "/docs/api-error-handling/2.25.3.html"
- "/docs/api-error-handling/2.25.4"
- "/docs/api-error-handling/2.25.4.html"
- "/docs/api-error-handling/2.25.5"
- "/docs/api-error-handling/2.25.5.html"
- "/docs/api-error-handling/2.26.0"
- "/docs/api-error-handling/2.26.0.html"
- "/docs/api-error-handling/2.26.1"
- "/docs/api-error-handling/2.26.1.html"
- "/docs/api-error-handling/2.26.2"
- "/docs/api-error-handling/2.26.2.html"
- "/docs/api-error-handling/2.26.3"
- "/docs/api-error-handling/2.26.3.html"
- "/docs/api-error-handling/2.27.0"
- "/docs/api-error-handling/2.27.0.html"
- "/docs/api-error-handling/2.27.1"
- "/docs/api-error-handling/2.27.1.html"
- "/docs/api-error-handling/2.28.0"
- "/docs/api-error-handling/2.28.0.html"
- "/docs/api-error-handling/2.28.1"
- "/docs/api-error-handling/2.28.1.html"
- "/docs/api-error-handling/2.29.0"
- "/docs/api-error-handling/2.29.0.html"
- "/docs/api-error-handling/2.29.1"
- "/docs/api-error-handling/2.29.1.html"
- "/docs/api-error-handling/2.29.2"
- "/docs/api-error-handling/2.29.2.html"
- "/docs/api-error-handling/2.29.3"
- "/docs/api-error-handling/2.29.3.html"
- "/docs/api-error-handling/2.30.0"
- "/docs/api-error-handling/2.30.0.html"
- "/docs/api-error-handling/2.30.1"
- "/docs/api-error-handling/2.30.1.html"
- "/docs/api-error-handling/2.30.2"
- "/docs/api-error-handling/2.30.2.html"
- "/docs/api-error-handling/2.30.3"
- "/docs/api-error-handling/2.30.3.html"
- "/docs/api-error-handling/2.30.4"
- "/docs/api-error-handling/2.30.4.html"
- "/docs/api-error-handling/2.30.5"
- "/docs/api-error-handling/2.30.5.html"
- "/docs/api-error-handling/2.30.6"
- "/docs/api-error-handling/2.30.6.html"
- "/docs/api-error-handling/2.30.7"
- "/docs/api-error-handling/2.30.7.html"
- "/docs/api-error-handling/2.30.8"
- "/docs/api-error-handling/2.30.8.html"
- "/docs/api-error-handling/2.30.9"
- "/docs/api-error-handling/2.30.9.html"
- "/docs/api-error-handling/2.31.0"
- "/docs/api-error-handling/2.31.0.html"
- "/docs/api-error-handling/2.31.1"
- "/docs/api-error-handling/2.31.1.html"
- "/docs/api-error-handling/2.31.2"
- "/docs/api-error-handling/2.31.2.html"
- "/docs/api-error-handling/2.31.3"
- "/docs/api-error-handling/2.31.3.html"
- "/docs/api-error-handling/2.31.4"
- "/docs/api-error-handling/2.31.4.html"
- "/docs/api-error-handling/2.31.5"
- "/docs/api-error-handling/2.31.5.html"
- "/docs/api-error-handling/2.31.6"
- "/docs/api-error-handling/2.31.6.html"
- "/docs/api-error-handling/2.31.7"
- "/docs/api-error-handling/2.31.7.html"
- "/docs/api-error-handling/2.31.8"
- "/docs/api-error-handling/2.31.8.html"

---
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><code>die</code>, <code>usage</code>, <code>error</code>, and <code>warning</code> report errors of various
kinds.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>die</code> is for fatal application errors.  It prints a message to
the user and exits with status 128.</p>
</li>
<li>
<p><code>usage</code> is for errors in command line usage.  After printing its
message, it exits with status 129.  (See also <code>usage_with_options</code>
in the <a href="{{< relurl "docs/api-parse-options" >}}">parse-options API</a>.)</p>
</li>
<li>
<p><code>error</code> is for non-fatal library errors.  It prints a message
to the user and returns -1 for convenience in signaling the error
to the caller.</p>
</li>
<li>
<p><code>warning</code> is for reporting situations that probably should not
occur but which the user (and Git) can continue to work around
without running into too many problems.  Like <code>error</code>, it
returns -1 after reporting the situation to the caller.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_customizable_error_handlers"><a class="anchor" href="#_customizable_error_handlers"></a>Customizable error handlers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The default behavior of <code>die</code> and <code>error</code> is to write a message to
stderr and then exit or return as appropriate.  This behavior can be
overridden using <code>set_die_routine</code> and <code>set_error_routine</code>.  For
example, "git daemon" uses set_die_routine to write the reason <code>die</code>
was called to syslog before exiting.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_library_errors"><a class="anchor" href="#_library_errors"></a>Library errors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Functions return a negative integer on error.  Details beyond that
vary from function to function:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Some functions return -1 for all errors.  Others return a more
specific value depending on how the caller might want to react
to the error.</p>
</li>
<li>
<p>Some functions report the error to stderr with <code>error</code>,
while others leave that for the caller to do.</p>
</li>
<li>
<p>errno is not meaningful on return from most functions (except
for thin wrappers for system calls).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Check the function&#8217;s API documentation to be sure.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_caller_handled_errors"><a class="anchor" href="#_caller_handled_errors"></a>Caller-handled errors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An increasing number of functions take a parameter <em>struct strbuf *err</em>.
On error, such functions append a message about what went wrong to the
<em>err</em> strbuf.  The message is meant to be complete enough to be passed
to <code>die</code> or <code>error</code> as-is.  For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>if (ref_transaction_commit(transaction, &amp;err))
	die("%s", err.buf);</pre>
</div>
</div>
<div class="paragraph">
<p>The <em>err</em> parameter will be untouched if no error occurred, so multiple
function calls can be chained:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>t = ref_transaction_begin(&amp;err);
if (!t ||
    ref_transaction_update(t, "HEAD", ..., &amp;err) ||
    ret_transaction_commit(t, &amp;err))
	die("%s", err.buf);</pre>
</div>
</div>
<div class="paragraph">
<p>The <em>err</em> parameter must be a pointer to a valid strbuf.  To silence
a message, pass a strbuf that is explicitly ignored:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>if (thing_that_can_fail_in_an_ignorable_way(..., &amp;err))
	/* This failure is okay. */
	strbuf_reset(&amp;err);</pre>
</div>
</div>
</div>
</div>